</div>
<script>
  function getChildren(n, skipMe){
      var r = [];
      for ( ; n; n = n.nextSibling )
         if ( n.nodeType == 1 && n != skipMe)
            r.push( n );
      return r;
  };

  function getSiblings(n) {
      return getChildren(n.parentNode.firstChild, n);
  }

  (function() {
    // mark empty uls

    var allLists = document.getElementsByTagName('ul');

    for(var i=0;i<allLists.length;i++){
      if(allLists[i].getElementsByTagName('*').length == 0){
        allLists[i].className = 'empty';
        getSiblings(allLists[i])[0].className = 'leaf';
      }
    }
  })();

  // count leafs to be done

  var ul = document.getElementById("stats");
  var li = document.createElement("li");

  li.className = 'inactive';

  li.appendChild(document.createTextNode("inactive: " + leafsRemaning));
  ul.appendChild(li);
</script>
</body>
</html>
